{"version":3,"sources":["The_Data.js"],"names":["cc","Class","extends","Component","properties","onLoad","game","addPersistRootNode","node","Win_Initial_Position","v2","view","getVisibleSize","width","height","setPosition","Save_List","Tool_List","userData","Player_Position","start","JSON","parse","sys","localStorage","getItem","Make_Save","Value","New_Time","Write_Current_Date","New_The_Scene","director","getScene","name","New_The_Position","find","position","Time","The_Scene","The_Position","push","setItem","stringify","now","Date","year","getFullYear","month","getMonth","date","getDate","day","getDay","hour","getHours","minu","getMinutes","sec","getSeconds","week","arr_week","Array","time","Load_Save","loadScene","Delete_Save","splice"],"mappings":";;;;;;AAAC;;AAEDA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY,EAHP;;AAOLC,UAPK,oBAOI;AACL;AACAL,WAAGM,IAAH,CAAQC,kBAAR,CAA2B,KAAKC,IAAhC;AACA;AACA,aAAKC,oBAAL,GAA4BT,GAAGU,EAAH,CAAMV,GAAGW,IAAH,CAAQC,cAAR,GAAyBC,KAA/B,EAAsCb,GAAGW,IAAH,CAAQC,cAAR,GAAyBE,MAA/D,CAA5B;AACA,aAAKN,IAAL,CAAUO,WAAV,CAAsB,KAAKN,oBAA3B;AACA;AACA,aAAKO,SAAL,GAAiB,EAAjB;AACA;AACA,aAAKC,SAAL,GAAiB,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,CAAjB;AACA;AACA,aAAKC,QAAL,GAAgB,IAAhB;AACA;AACA,aAAKC,eAAL,GAAuB,IAAvB;AACH,KArBI;AAuBLC,SAvBK,mBAuBI;AACL,YAAIC,KAAKC,KAAL,CAAWtB,GAAGuB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAX,CAAJ,EAA0D;AACtD,gBAAIT,YAAYK,KAAKC,KAAL,CAAWtB,GAAGuB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAX,CAAhB;AACA,iBAAKT,SAAL,GAAiBA,SAAjB;AACH;AACJ,KA5BI;;AA6BL;AACAU,aA9BK,qBA8BKC,KA9BL,EA8BY;AACb,YAAIC,WAAW,KAAKC,kBAAL,EAAf;AACA,YAAIC,gBAAgB9B,GAAG+B,QAAH,CAAYC,QAAZ,GAAuBC,IAA3C;AACA,YAAIC,mBAAmBlC,GAAGmC,IAAH,CAAQ,YAAR,EAAsBC,QAA7C;AACA,YAAIpB,YAAYK,KAAKC,KAAL,CAAWtB,GAAGuB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAX,CAAhB;AACA,YAAIP,WAAW,KAAKA,QAApB;AACAA,iBAASmB,IAAT,GAAgBT,QAAhB;AACAV,iBAASoB,SAAT,GAAqBR,aAArB;AACAZ,iBAASqB,YAAT,GAAwBL,gBAAxB;AACA,YAAIP,SAAS,CAAb,EAAgB;AACZX,sBAAUW,KAAV,IAAmBT,QAAnB;AACH,SAFD,MAEO;AACHF,sBAAUwB,IAAV,CAAetB,QAAf;AACH;AACD,aAAKF,SAAL,GAAiBA,SAAjB;AACAhB,WAAGuB,GAAH,CAAOC,YAAP,CAAoBiB,OAApB,CAA4B,WAA5B,EAAyCpB,KAAKqB,SAAL,CAAe1B,SAAf,CAAzC;AACH,KA9CI;;AA+CL;AACAa,sBAhDK,gCAgDgB;AACjB,YAAIc,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,OAAOF,IAAIG,WAAJ,EAAX,CAFiB,CAEa;AAC9B,YAAIC,QAAQJ,IAAIK,QAAJ,EAAZ,CAHiB,CAGU;AAC3B,YAAIC,OAAON,IAAIO,OAAJ,EAAX,CAJiB,CAIQ;AACzB,YAAIC,MAAMR,IAAIS,MAAJ,EAAV,CALiB,CAKM;AACvB,YAAIC,OAAOV,IAAIW,QAAJ,EAAX,CANiB,CAMS;AAC1B,YAAIC,OAAOZ,IAAIa,UAAJ,EAAX,CAPiB,CAOW;AAC5B,YAAIC,MAAMd,IAAIe,UAAJ,EAAV,CARiB,CAQU;AAC3B;AACA,YAAIC,IAAJ;AACAZ,gBAAQA,QAAQ,CAAhB;AACA,YAAIA,QAAQ,EAAZ,EAAgBA,QAAQ,MAAMA,KAAd;AAChB,YAAIE,OAAO,EAAX,EAAeA,OAAO,MAAMA,IAAb;AACf,YAAII,OAAO,EAAX,EAAeA,OAAO,MAAMA,IAAb;AACf,YAAIE,OAAO,EAAX,EAAeA,OAAO,MAAMA,IAAb;AACf,YAAIE,MAAM,EAAV,EAAcA,MAAM,MAAMA,GAAZ;AACd;AACA,YAAIG,WAAW,IAAIC,KAAJ,CAAU,KAAV,EAAiB,KAAjB,EAAwB,KAAxB,EAA+B,KAA/B,EAAsC,KAAtC,EAA6C,KAA7C,EAAoD,KAApD,CAAf;AACAF,eAAOC,SAAST,GAAT,CAAP;AACA,YAAIW,OAAO,EAAX;AACAA,eAAOjB,OAAO,GAAP,GAAaE,KAAb,GAAqB,GAArB,GAA2BE,IAA3B,GAAkC,GAAlC,GAAwC,GAAxC,GAA8CI,IAA9C,GAAqD,GAArD,GAA2DE,IAA3D,GAAkE,GAAlE,GAAwEE,GAAxE,GAA8E,GAA9E,GAAoFE,IAA3F;AACA;AACA;AACA,eAAOG,IAAP;AACH,KAzEI;;AA0EL;AACAC,aA3EK,qBA2EKpC,KA3EL,EA2EY;AACb,YAAIX,YAAYK,KAAKC,KAAL,CAAWtB,GAAGuB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAX,CAAhB;AACA,YAAIP,WAAWF,UAAUW,KAAV,CAAf;AACA,YAAIW,YAAY,EAAhB;AACAA,oBAAY,WAAWpB,SAASoB,SAAhC;AACA,YAAIC,eAAerB,SAASqB,YAA5B;AACAvC,WAAG+B,QAAH,CAAYiC,SAAZ,CAAsB1B,SAAtB;AACA,aAAKnB,eAAL,GAAuBoB,YAAvB;AACA,aAAKrB,QAAL,GAAgBA,QAAhB;AACH,KApFI;;AAqFL;AACA+C,eAtFK,uBAsFOtC,KAtFP,EAsFc;AACf,YAAIX,YAAYK,KAAKC,KAAL,CAAWtB,GAAGuB,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAAX,CAAhB;AACAT,kBAAUkD,MAAV,CAAiBvC,KAAjB,EAAwB,CAAxB;AACA,aAAKX,SAAL,GAAiBA,SAAjB;AACAhB,WAAGuB,GAAH,CAAOC,YAAP,CAAoBiB,OAApB,CAA4B,WAA5B,EAAyCpB,KAAKqB,SAAL,CAAe1B,SAAf,CAAzC;AACH;AACD;;AA5FK,CAAT","file":"The_Data.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\The_data_folder","sourcesContent":["﻿//说明\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    onLoad() {\r\n        //常驻节点\r\n        cc.game.addPersistRootNode(this.node);\r\n        //重置常驻节点位置\r\n        this.Win_Initial_Position = cc.v2(cc.view.getVisibleSize().width, cc.view.getVisibleSize().height);\r\n        this.node.setPosition(this.Win_Initial_Position);\r\n        //存档列表\r\n        this.Save_List = [];\r\n        //道具列表 未重置\r\n        this.Tool_List = ['道具1', '道具2', '道具3', '道具4', '道具5', '道具6', '道具7', '道具8', '道具9'];\r\n        //正在进行的档\r\n        this.userData = null;\r\n        //存档时间戳 位置\r\n        this.Player_Position = null;\r\n    },\r\n\r\n    start () {\r\n        if (JSON.parse(cc.sys.localStorage.getItem('Save_List'))) {\r\n            let Save_List = JSON.parse(cc.sys.localStorage.getItem('Save_List'));\r\n            this.Save_List = Save_List;\r\n        }\r\n    },\r\n    //存档 || 覆盖存档  Value留空为新存档,键入值为覆盖的存档位置\r\n    Make_Save(Value) {\r\n        let New_Time = this.Write_Current_Date();\r\n        let New_The_Scene = cc.director.getScene().name;\r\n        let New_The_Position = cc.find('Canvas/Map').position;\r\n        let Save_List = JSON.parse(cc.sys.localStorage.getItem('Save_List'));\r\n        let userData = this.userData;\r\n        userData.Time = New_Time;\r\n        userData.The_Scene = New_The_Scene;\r\n        userData.The_Position = New_The_Position;\r\n        if (Value >= 0) {\r\n            Save_List[Value] = userData;\r\n        } else {\r\n            Save_List.push(userData);\r\n        };\r\n        this.Save_List = Save_List;\r\n        cc.sys.localStorage.setItem('Save_List', JSON.stringify(Save_List));\r\n    },\r\n    //存档时间返回\r\n    Write_Current_Date() {\r\n        var now = new Date();\r\n        var year = now.getFullYear(); //得到年份\r\n        var month = now.getMonth();//得到月份\r\n        var date = now.getDate();//得到日期\r\n        var day = now.getDay();//得到周几\r\n        var hour = now.getHours();//得到小时\r\n        var minu = now.getMinutes();//得到分钟\r\n        var sec = now.getSeconds();//得到秒\r\n        //var MS = now.getMilliseconds();//获取毫秒\r\n        var week;\r\n        month = month + 1;\r\n        if (month < 10) month = \"0\" + month;\r\n        if (date < 10) date = \"0\" + date;\r\n        if (hour < 10) hour = \"0\" + hour;\r\n        if (minu < 10) minu = \"0\" + minu;\r\n        if (sec < 10) sec = \"0\" + sec;\r\n        //if （MS< 100）MS = \"0\" + MS;\r\n        var arr_week = new Array(\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\");\r\n        week = arr_week[day];\r\n        var time = \"\";\r\n        time = year + \"年\" + month + \"月\" + date + \"日\" + \" \" + hour + \":\" + minu + \":\" + sec + \" \" + week;\r\n        //设置得到当前日期的函数的执行间隔时间，每1000毫秒刷新一次。\r\n        //var timer = setTimeout(\"writeCurrentDate()\", 1000);\r\n        return time;\r\n    },\r\n    //读档\r\n    Load_Save(Value) {\r\n        let Save_List = JSON.parse(cc.sys.localStorage.getItem('Save_List'));\r\n        let userData = Save_List[Value];\r\n        let The_Scene = '';\r\n        The_Scene = 'Scene/' + userData.The_Scene;\r\n        let The_Position = userData.The_Position;\r\n        cc.director.loadScene(The_Scene);\r\n        this.Player_Position = The_Position;\r\n        this.userData = userData;\r\n    },\r\n    //删除存档\r\n    Delete_Save(Value) {\r\n        let Save_List = JSON.parse(cc.sys.localStorage.getItem('Save_List'));\r\n        Save_List.splice(Value, 1);  \r\n        this.Save_List = Save_List;\r\n        cc.sys.localStorage.setItem('Save_List', JSON.stringify(Save_List));\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}